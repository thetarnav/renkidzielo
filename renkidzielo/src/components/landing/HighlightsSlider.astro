---
import HighlightsSlider from "@islands/HighlightsSlider"

import { BACKEND_ENDPOINT } from "@/utils/variables"
import { Highlight } from "@/types/api"

// TODO: move fetching to the index.astro page
// fetching should start as high as possible (could be awaited here)

// TODO: move fetch logic to a separate api module

const endpoint = BACKEND_ENDPOINT + "/highlights"

async function fetchHighlights(): Promise<Highlight[]> {
	const response = await fetch(endpoint)
	const json = await response.json()
	return json
}

const highlights = await fetchHighlights()
---

<HighlightsSlider highlights={highlights} client:visible />
